<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <!-- stylesheet -->
    <link rel="stylesheet" href="styles/services.css" />

    <!-- bootstrap -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    />

    <!-- font-awesome -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />

    <title>Prince Georges Farmers Markets</title>
  </head>
  <body>
    <!-- Navigation -->
    <nav
      class="navbar navbar-expand-lg navbar-light"
      style="background-color: #ffffff"
    >
      <a class="navbar-brand" href="#">Hyattsville Farmers Markets</a>
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarText"
        aria-controls="navbarText"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarText">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item active">
            <a class="nav-link" href="index.html"
              >Home
              <span class="sr-only">(current)</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="about.html">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="services.html">Services</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="help.html">Help</a>
          </li>
        </ul>
      </div>
    </nav>

    <!-- Jumbotron -->
    <div class="card card-image">
      <div class="text-center rgba-stylish-strong py-5 px-4">
        <div class="intro py-5">
          <!-- Content -->
          <h1 class="h1 orange-text">
            Find the best market
          </h1>
          <h3 class="card-title h3 my-4 py-2">
            Click on different pins to find out more about the location.
          </h3>
        </div>
      </div>
    </div>

    <!-- TABLE AND MAP -->

    <div class="row">
      <div class="col">
        <table class="table table-hover table-dark">
          <thead>
            <tr>
              <th scope="col">Name</th>
              <th scope="col">Website</th>
            </tr>
          </thead>
          <tbody class="temp"></tbody>
        </table>
      </div>
      <div class="col">
        <iframe
          width="600"
          height="600"
          id="gmap_canvas"
          src="https://www.google.com/maps/d/u/0/embed?mid=1ztngLn5ZqP24hZH5Uy9pPo3YSxVXK6vq"
          frameborder="0"
          scrolling="yes"
        ></iframe>
      </div>
    </div>

    <div class="gmap_canvas"></div>

    <script>
      fetch('https://data.princegeorgescountymd.gov/resource/sphi-rwax.json')
        .then(res => res.json())
        .then(res => res.map(c => c.market_name + 'split' + c.website))
        .then(data => {
          const a = data.map(item => {
            return item;
          });
          console.log(a);
          var final_text = '';
          for (var i = 0; i < data.length; i++) {
            var split_array = a[i].split('split');
            if (split_array[1] == 'undefined') {
              split_array[1] = 'Not Avaliable';
            }
            final_text +=
              '<tr><td>' +
              split_array[0] +
              '</td><td>' +
              '<a href= "' + split_array[1] + '">' + split_array[1] + '</a>' +
              '</td></tr>';
          }
          
          const element = document.querySelector('.temp');
          element.innerHTML = final_text;
          return data;
        })
        .then(data => console.log(data));
    </script>
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
  </body>
</html>